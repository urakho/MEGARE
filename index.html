<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Retro Tanks - Procedural Walls</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

<div class="ui">
    <b>WASD</b> ‚Äî –•–æ–¥ —Ç–∞–Ω–∫–∞<br>
    <b>WHEEL</b> ‚Äî –í—Ä–∞—â–µ–Ω–∏–µ –±–∞—à–Ω–∏<br>
    <b>SPACE</b> ‚Äî –í—ã—Å—Ç—Ä–µ–ª<br>
    <b>E</b> ‚Äî –°–ø–µ—Ü. —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å (–í—Ä–µ–º–µ–Ω–Ω–∞—è –ø–µ—Ç–ª—è)<br>
    <b>F5</b> ‚Äî –ü–µ—Ä–µ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –º–∏—Ä<br>
    <b>Coins: <span id="coinDisplay" class="currency-coin">0</span></b><br>
    <b>Gems: <span id="gemDisplay" class="currency-gem">0</span></b><br>
    <hr>
    <small>–°—Ç–µ–Ω—ã —Å–æ–∑–¥–∞—é—Ç—Å—è —Å–µ–≥–º–µ–Ω—Ç–∞–º–∏,<br>–ø—Ä–æ–µ–∑–¥ –≤—Å–µ–≥–¥–∞ —Å–≤–æ–±–æ–¥–µ–Ω.</small>
</div>
<canvas id="gameCanvas"></canvas>

<!-- Main menu overlay -->
<div id="mainMenu" class="modal-overlay" style="display:flex;">
    <div class="modal-box" style="width:440px;">
        <h1 class="modal-title">–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é</h1>
        <div style="display:flex; justify-content:center; gap:20px; margin-bottom:15px; font-weight:bold; font-size:18px; background:rgba(0,0,0,0.3); padding:8px; border-radius:8px;">
            <span style="color:#f1c40f">üí∞ <span class="currency-coin">0</span></span>
            <span style="color:#2ecc71">üíé <span class="currency-gem">0</span></span>
        </div>
        <div id="previewWrap" style="display:flex;flex-direction:column;align-items:center;">
            <canvas id="previewCanvas" width="200" height="150"></canvas>
            <div id="previewLabel" style="margin-top:10px; font-size:16px; font-weight:600;">–í–∞—à —Ç–∞–Ω–∫</div>
        </div>
        <button id="startBtn" class="btn btn-primary" style="margin-top:16px;">START</button>
        <button id="shopBtn" class="btn btn-shop" style="margin-top:8px;">–ú–∞–≥–∞–∑–∏–Ω</button>
        <button id="characterBtn" class="btn btn-char" style="margin-top:8px;">–ü–µ—Ä—Å–æ–Ω–∞–∂–∏</button>
    </div>
</div>

<!-- Mode selection modal (hidden by default) -->
<div id="modeModal" class="modal-overlay">
    <div class="modal-box" style="width:520px;">
        <h2 class="modal-title">–í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–∂–∏–º</h2>
        <div style="display:flex; flex-direction:column; gap:12px; align-items:center;">
            <button id="modeSingle" class="btn btn-mode" style="width:80%;">–û–¥–∏–Ω–æ—á–Ω—ã–π —Ä–µ–∂–∏–º</button>
            <button id="modeTeam" class="btn btn-mode" style="width:80%;">–ö–æ–º–∞–Ω–¥–Ω—ã–π —Ä–µ–∂–∏–º (4 –∫–æ–º–∞–Ω–¥—ã –ø–æ 2)</button>
            <button id="modeCancel" class="btn btn-secondary" style="width:80%;">–û—Ç–º–µ–Ω–∞</button>
        </div>
    </div>
</div>

<!-- Shop modal (hidden by default) -->
<div id="shopModal" class="modal-overlay">
    <div class="modal-box" style="width:600px;">
        <h2 class="modal-title">üõí –ú–∞–≥–∞–∑–∏–Ω</h2>
        <div style="display:flex; justify-content:center; gap:20px; margin-bottom:15px; font-weight:bold; font-size:18px; background:rgba(0,0,0,0.3); padding:8px; border-radius:8px;">
            <span style="color:#f1c40f">üí∞ <span class="currency-coin">0</span></span>
            <span style="color:#2ecc71">üíé <span class="currency-gem">0</span></span>
        </div>
        
        <!-- Shop items container with scroll -->
        <div style="display:flex; flex-direction:column; gap:15px; align-items:center; max-height: 400px; overflow-y: auto; padding-right: 5px; width: 100%;">
            <div style="background: rgba(255,255,255,0.1); padding:15px; border-radius:10px; width:80%; flex-shrink: 0;">
                <img src="png/cont1.png" alt="–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä" style="width:80px; height:80px; margin-bottom:10px;">
                <p style="margin:5px 0; font-size:16px; font-weight:bold; color:#f1c40f;">–ë—Ä–æ–Ω–∑–æ–≤—ã–π –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä</p>
                <p style="margin:5px 0; font-size:14px;">–°–æ–¥–µ—Ä–∂–∏—Ç —Å–ª—É—á–∞–π–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–æ–Ω–µ—Ç (10-100) –∏ —à–∞–Ω—Å –Ω–∞ –æ–±—ã—á–Ω–æ–≥–æ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞.</p>
                <button id="buyContainer" class="btn btn-primary">–ö—É–ø–∏—Ç—å (100 –º–æ–Ω–µ—Ç)</button>
            </div>
            <div style="background: rgba(255,255,255,0.1); padding:15px; border-radius:10px; width:80%; flex-shrink: 0;">
                <img src="png/super-cont.png" alt="–°—É–ø–µ—Ä –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä" style="width:80px; height:80px; margin-bottom:10px;">
                <p style="margin:5px 0; font-size:16px; font-weight:bold; color:#e91e63; text-shadow:0 0 5px #ff00de;">–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–π –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä</p>
                <p style="margin:5px 0; font-size:14px;">–í—ã—Å–æ–∫–∏–π —à–∞–Ω—Å –ø–æ–ª—É—á–∏—Ç—å Gems, —Ä–µ–¥–∫–∏—Ö –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π!</p>
                <button id="buySuperContainer" class="btn btn-char">–ö—É–ø–∏—Ç—å (500 –º–æ–Ω–µ—Ç)</button>
            </div>
            <div style="background: rgba(255,255,255,0.1); padding:15px; border-radius:10px; width:80%; flex-shrink: 0;">
                <img src="png/omega-cont.png" alt="–û–º–µ–≥–∞ –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä" style="width:80px; height:80px; margin-bottom:10px;">
                <p style="margin:5px 0; font-size:16px; font-weight:bold; color:#9b59b6; text-shadow:0 0 5px #8e44ad;">–û–º–µ–≥–∞ –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä</p>
                <p style="margin:5px 0; font-size:14px;">–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–µ –Ω–∞–≥—Ä–∞–¥—ã! –†–µ–¥–∫–∏–µ —Ç–∞–Ω–∫–∏ –∏ –≥–æ—Ä—ã —Ä–µ—Å—É—Ä—Å–æ–≤.</p>
                <button id="buyOmegaContainer" class="btn btn-char" style="background: linear-gradient(45deg, #8e44ad, #9b59b6);">–ö—É–ø–∏—Ç—å (2000 –º–æ–Ω–µ—Ç)</button>
            </div>
        </div>
        <div style="margin-top: 15px; text-align: center;">
            <button id="shopCancel" class="btn btn-secondary">–ó–∞–∫—Ä—ã—Ç—å</button>
        </div>
    </div>
</div>

<!-- Character modal (hidden by default) -->
<div id="characterModal" class="modal-overlay">
    <div class="modal-box" style="width:700px;">
        <h2 class="modal-title">üë§ –ü–µ—Ä—Å–æ–Ω–∞–∂–∏</h2>
        <div style="display:flex; justify-content:center; gap:20px; margin-bottom:15px; font-weight:bold; font-size:18px; background:rgba(0,0,0,0.3); padding:8px; border-radius:8px;">
            <span style="color:#f1c40f">üí∞ <span class="currency-coin">0</span></span>
            <span style="color:#2ecc71">üíé <span class="currency-gem">0</span></span>
        </div>
        <div style="display:flex; flex-direction:row; flex-wrap:wrap; gap:20px; align-items:center; justify-content:center; max-height:400px; overflow-y:auto;">
            <div style="text-align:center; width:180px;">
                <canvas id="normalTankPreview" width="150" height="150" style="border:2px solid #e74c3c; border-radius:8px;"></canvas>
                <button id="selectNormalTank" class="btn btn-primary">–û–±—ã—á–Ω—ã–π</button>
            </div>
            <div style="text-align:center; width:180px;">
                <canvas id="iceTankPreview" width="150" height="150" style="border:2px solid #3498db; border-radius:8px;"></canvas>
                <button id="selectIceTank" class="btn btn-shop">–õ–µ–¥—è–Ω–æ–π</button>
            </div>
            <div style="text-align:center; width:180px;">
                <canvas id="fireTankPreview" width="150" height="150" style="border:2px solid #e67e22; border-radius:8px;"></canvas>
                <button id="selectFireTank" class="btn btn-secondary" style="color:#222; background:linear-gradient(180deg,#b4b8bd,#95a5a6);">–û–≥–Ω–µ–º—ë—Ç—á–∏–∫</button>
            </div>
            <div style="text-align:center; width:180px;">
                <canvas id="buratinoTankPreview" width="150" height="150" style="border:2px solid #9b59b6; border-radius:8px;"></canvas>
                <button id="selectBuratinoTank" class="btn btn-char">–ë—É—Ä–∞—Ç–∏–Ω–æ</button>
            </div>
            <div style="text-align:center; width:180px;">
                <canvas id="toxicTankPreview" width="150" height="150" style="border:2px solid #00ff9da0; border-radius:8px;"></canvas>
                <button id="selectToxicTank" class="btn btn-mode">–û—Ç—Ä–∞–≤–ª—è—é—â–∏–π</button>
            </div>
            <div style="text-align:center; width:180px;">
                <canvas id="plasmaTankPreview" width="150" height="150" style="border:2px solid #8e44ad; border-radius:8px;"></canvas>
                <button id="selectPlasmaTank" class="btn btn-blood">–ü–ª–∞–∑–º–µ–Ω–Ω—ã–π</button>
            </div>
            <div style="text-align:center; width:180px;">
                <canvas id="musicalTankPreview" width="150" height="150" style="border:2px solid #e91e63; border-radius:8px;"></canvas>
                <button id="selectMusicalTank" class="btn btn-char">–ú—É–∑—ã–∫–∞–ª—å–Ω—ã–π</button>
            </div>
            <div style="text-align:center; width:180px;">
                <canvas id="illuminatTankPreview" width="150" height="150" style="border:2px solid #f39c12; border-radius:8px;"></canvas>
                <button id="selectIlluminatTank" class="btn btn-blood">üëÅ –ò–ª–ª—é–º–∏–Ω–∞—Ç</button>
            </div>
            <div style="text-align:center; width:180px;">
                <canvas id="mirrorTankPreview" width="150" height="150" style="border:2px solid #95a5a6; border-radius:8px;"></canvas>
                <button id="selectMirrorTank" class="btn btn-secondary">–ó–µ—Ä–∫–∞–ª—å–Ω—ã–π</button>
            </div>
            <div style="text-align:center; width:180px;">
                <canvas id="timeTankPreview" width="150" height="150" style="border:2px solid #aaa; border-radius:8px; box-shadow: 0 0 10px rgba(0,255,204,0.5);"></canvas>
                <button id="selectTimeTank" class="btn btn-char" style="width: 100%; box-sizing: border-box; display: block; margin: 8px 0; font-size: 16px; padding: 12px 0; background: linear-gradient(90deg,#ff0044,#ff9a00,#ffee00,#33ff66,#00ccff,#6a00ff,#ff00aa); background-size: 220% 220%; animation: rainbowPixelBg 6s linear infinite; image-rendering: pixelated; box-shadow: 0 4px 15px rgba(255, 255, 255, 0.4); text-shadow: 0 1px 2px rgba(0,0,0,0.55); border: none;">‚è≥ –í—Ä–µ–º–µ–Ω–Ω–æ–π</button>
            </div>
        </div>
        <button id="characterCancel" class="btn btn-secondary" style="margin-top:20px;">–ó–∞–∫—Ä—ã—Ç—å</button>
    </div>
</div>

<!-- Version Modal -->
<div id="versionModal" class="modal-overlay">
    <div class="modal-box">
        <h2 class="modal-title">MEGARE</h2>
        <p style="margin: 10px 0; font-size: 18px;">–í–µ—Ä—Å–∏—è: <span id="versionText" style="color: #2ecc71; font-weight: bold;">0.5.0</span></p>
        <p style="margin: 10px 0; font-size: 14px; color: #bdc3c7;">Retro Tanks with Procedural Walls</p>
        <button id="versionClose" class="btn btn-shop" style="margin-top:20px;">–ó–∞–∫—Ä—ã—Ç—å</button>
    </div>
</div>

<!-- Tank Detail Modal (hidden by default) -->
<div id="tankDetailModal" class="modal-overlay">
    <div class="modal-box" style="width:500px;">
        <h2 id="tankDetailTitle" class="modal-title">–¢–∞–Ω–∫</h2>
        <p id="tankDetailRarity" style="margin:0 0 10px 0; font-size:20px; color:#f1c40f;">–†–µ–¥–∫–æ—Å—Ç—å</p>
        <div style="display:flex; align-items:center; justify-content:space-between; margin-bottom:20px;">
            <canvas id="tankDetailCanvas" width="200" height="200" style="border:2px solid #444; border-radius:8px;"></canvas>
            <div id="tankDetailDescription" style="flex:1; margin-left:20px; text-align:left; font-size:16px; line-height:1.5;">
                –û–ø–∏—Å–∞–Ω–∏–µ —Ç–∞–Ω–∫–∞
            </div>
        </div>
        <div style="display:flex; gap:20px; justify-content:center;">
            <button id="tankDetailClose" class="btn btn-secondary">–ó–∞–∫—Ä—ã—Ç—å</button>
            <button id="tankDetailSelect" class="btn btn-primary">–í—ã–±—Ä–∞—Ç—å</button>
        </div>
    </div>
</div>

<!-- Reward Modal -->
<div id="rewardModal" class="reward-overlay">
    <div class="reward-box">
        <div class="reward-title" id="rewardTitle">YOU GOT!</div>
        <div id="rewardIconContainer">
            <div class="reward-icon" id="rewardIcon">üèÜ</div>
        </div>
        <div class="reward-amount" id="rewardAmount">+100 Coins</div>
        <div class="reward-desc" id="rewardDesc">Basic reward</div>
        <button class="reward-btn" id="rewardClaimBtn">CLAIM</button>
    </div>
</div>

<!-- Container reveal flow -->
<div id="containerFlowModal" class="modal-overlay" style="z-index: 170;">
    <div class="container-flow-box">
        <div class="container-flow-content">
            <img id="containerFlowPreview" class="container-flow-img" src="png/cont1.png" alt="–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä">
            <div class="container-flow-text-group">
                <p id="containerFlowText" class="container-flow-text"></p>
                <p class="container-flow-hint">üëÜ –ù–∞–∂–º–∏ –Ω–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä, —á—Ç–æ–±—ã –µ–≥–æ –æ—Ç–∫—Ä—ã—Ç—å</p>
            </div>
            <div id="containerDropArea" class="container-drop-area"></div>
            <button id="containerFlowCancel" class="btn btn-secondary container-flow-cancel">–û—Ç–º–µ–Ω–∞</button>
        </div>
    </div>
</div>

<!-- Command modal (hidden by default) -->
<div id="commandModal" class="modal-overlay">
    <div class="modal-box" style="width:400px;">
        <h2 class="modal-title">–ö–æ–º–∞–Ω–¥–Ω–∞—è —Å—Ç—Ä–æ–∫–∞</h2>
        <p style="text-align:center; margin-bottom:15px;">–í–≤–µ–¥–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É, –Ω–∞—á–∏–Ω–∞—é—â—É—é—Å—è —Å /</p>
        <input type="text" id="commandInput" placeholder="/coins 100" style="width:100%; padding:10px; margin-bottom:15px; background:rgba(0,0,0,0.8); color:white; border:1px solid #fff; border-radius:4px; font-size:16px;">
        <div style="display:flex; justify-content:space-between;">
            <button id="commandExecute" class="btn btn-primary">–í—ã–ø–æ–ª–Ω–∏—Ç—å</button>
            <button id="commandCancel" class="btn btn-secondary">–û—Ç–º–µ–Ω–∞</button>
        </div>
    </div>
</div>

<!-- Result overlay (win / lose) using standard modal styles -->
<div id="resultOverlay" class="modal-overlay" style="z-index: 150;">
    <div class="modal-box" style="width: 500px;">
        <h2 id="resultStatus" class="modal-title">–ü–æ–±–µ–¥–∞</h2>
        
        <div id="resultEmblem" style="font-size: 64px; margin-bottom: 10px;">üèÜ</div>
        
        <h3 id="resultHeadline" style="color: #fff; margin: 10px 0;">–ó–û–ù–ê –û–ß–ò–©–ï–ù–ê</h3>
        <p id="resultMessage" style="color: #ccc; margin-bottom: 20px;">–ù–∞–≥—Ä–∞–¥–∞ —É–∂–µ –∑–∞—á–∏—Å–ª–µ–Ω–∞ –Ω–∞ —Ç–≤–æ–π —Å—á–µ—Ç.</p>
        
        <div id="resultReward" style="font-size: 24px; color: #f1c40f; margin-bottom: 25px; font-weight: bold;">+25 –º–æ–Ω–µ—Ç</div>
        
        <div style="display: flex; justify-content: center; gap: 15px;">
            <button id="resultRestart" class="btn btn-primary">–ó–∞–Ω–æ–≤–æ</button>
            <button id="resultToMenu" class="btn btn-secondary">–í –º–µ–Ω—é</button>
        </div>
        
        <div style="margin-top: 15px; font-size: 12px; color: #888; text-transform: uppercase;">
            <span id="resultMode">–†–µ–∂–∏–º</span>
        </div>
    </div>
</div>

<!-- Buy confirmation modal (styled) -->
<div id="buyConfirmModal" class="modal-overlay" style="display:none; z-index:160;">
    <div class="modal-box" style="width:420px; text-align:center;">
        <h2 id="buyConfirmTitle" class="modal-title">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –ø–æ–∫—É–ø–∫—É</h2>
        <p id="buyConfirmMessage" style="margin:12px 0 18px 0; color:#eee; font-size:16px;"></p>
        <div style="display:flex; justify-content:center; gap:12px;">
            <button id="buyConfirmBtn" class="btn btn-primary">–ö—É–ø–∏—Ç—å</button>
            <button id="buyCancelBtn" class="btn btn-secondary">–û—Ç–º–µ–Ω–∞</button>
        </div>
    </div>
</div>

<script src="main.js"></script>
<script src="tanks.js"></script>
</body>
</html>